{%- liquid
  assign section_st = section.settings
  assign menu_type = menu_type
-%}
{% liquid
  assign enable_rtl = settings.rtl
  assign iso_code = request.locale.iso_code
  assign lis_language_rtl = settings.language_rtl
  if lis_language_rtl != blank
    if lis_language_rtl contains iso_code
      assign enable_rtl = true
    else
      assign enable_rtl = false
    endif
  endif
%}
{% if link.links.size > 0 %}
  <ul
    class="subchildmenu list-unstyled px-30 px-1025-0{% if menu_type != 'dropdown' %} grid grid-cols gap{% endif %}"
  >
    {% if only_for_domain == true %}
      {% for child_link in link.links %}
        {% for grandchild_link in child_link.links %}
          <li class="menu-link level-1 {% if only_for_domain == true %} block hidden-1025 {% endif %}">
            <menu-item class="relative static-1025 flex justify-between align-center border-bottom border-bottom-1025-0">
              <a
                class="menu_item-link  no-underline  py-10 py-1025-5 min-h-55 min-h-1025-unset inline-flex align-center"
                href="{{ grandchild_link.url }}"
              >
                {% liquid
                  assign label_setting = ''
                  assign show_label = false

                  if grandchild_link.title contains '[hot]'
                    assign label_setting = label_setting | append: 'hot'
                    assign show_label = true
                  endif

                  if grandchild_link.title contains '[new]'
                    assign label_setting = label_setting | append: 'new'
                    assign show_label = true
                  endif

                  if grandchild_link.title contains '[sale]'
                    assign label_setting = label_setting | append: 'sale'
                    assign show_label = true
                  endif

                  if grandchild_link.title contains '[popular]'
                    assign label_setting = label_setting | append: 'popular'
                    assign show_label = true
                  endif

                  if grandchild_link.title contains '[coming soon]' and only_for_domain == true
                    assign label_setting = label_setting | append: 'coming_soon'
                    assign show_label = true
                  endif

                  assign child_link_title = grandchild_link.title
                  assign clean_title = child_link_title
                  assign clean_title = clean_title | replace: '[hot]', ''
                  assign clean_title = clean_title | replace: '[new]', ''
                  assign clean_title = clean_title | replace: '[sale]', ''
                  assign clean_title = clean_title | replace: '[popular]', ''
                  assign clean_title = clean_title | replace: '[coming soon]', ''
                  assign clean_title = clean_title | strip
                %}
                <span class="{% if child_link.links.size == 0 %}smooth-padding-hover transition{% endif %}">
                  {{- clean_title -}}
                </span>
                {% if show_label %}
                  <span class="menu_label rounded-2 text-center heading_weight relative absolute-1025 whitespace-nowrap uppercase  {{ label_setting }}">
                    {% if label_setting == 'coming_soon' and only_for_domain == true %}
                      coming soon
                    {% else %}
                      {{- section_st[label_setting] -}}
                    {% endif %}
                  </span>
                {% endif %}
              </a>
            </menu-item>
          </li>
        {% endfor %}
      {% endfor %}
    {% endif %}

    {% for child_link in link.links %}
      <li class="menu-link level-1 {% if only_for_domain == true %} hidden block-1025 {% endif %}">
        <menu-item class="relative static-1025 flex justify-between align-center border-bottom border-bottom-1025-0">
          <a
            class="menu_item-link {% if only_for_domain == true %}  hidden-important {% endif %}  no-underline{% if menu_type != 'dropdown' %} heading-style{% endif %} py-10 py-1025-5 min-h-55 min-h-1025-unset inline-flex align-center"
            href="{{ child_link.url }}"
          >
            {% liquid
              assign label_setting = ''
              assign show_label = false

              if child_link.title contains '[hot]'
                assign label_setting = label_setting | append: 'hot'
                assign show_label = true
              endif

              if child_link.title contains '[new]'
                assign label_setting = label_setting | append: 'new'
                assign show_label = true
              endif

              if child_link.title contains '[sale]'
                assign label_setting = label_setting | append: 'sale'
                assign show_label = true
              endif

              if child_link.title contains '[popular]'
                assign label_setting = label_setting | append: 'popular'
                assign show_label = true
              endif

              if grandchild_link.title contains '[coming soon]' and only_for_domain == true
                assign label_setting = label_setting | append: 'coming_soon'
                assign show_label = true
              endif

              assign child_link_title = child_link.title
              assign clean_title = child_link_title
              assign clean_title = clean_title | replace: '[hot]', ''
              assign clean_title = clean_title | replace: '[new]', ''
              assign clean_title = clean_title | replace: '[sale]', ''
              assign clean_title = clean_title | replace: '[popular]', ''
              assign clean_title = clean_title | replace: '[coming soon]', ''
              assign clean_title = clean_title | strip
            %}
            <span class="{% if child_link.links.size == 0 %}reversed-links transition{% else %} uppercase{% endif %}">
              {{- clean_title -}}
            </span>
            {% if show_label %}
              <span class="menu_label rounded-2 text-center heading_weight relative absolute-1025 whitespace-nowrap uppercase  {{ label_setting }}">
                {% if label_setting == 'coming_soon' and only_for_domain == true %}
                  coming soon
                {% else %}
                  {{- section_st[label_setting] -}}
                {% endif %}
              </span>
            {% endif %}
          </a>
          {%- if child_link.links.size > 0 -%}
            <open-children-toggle class="inline-flex ms-5 flex-end align-center pointer{% if menu_type != 'dropdown' %} hidden-1025{% endif %}{% if enable_rtl %} left-0 left-1025-15{% else %} right-1025-15 right-0{% endif %}{% if section_st.redirect_to_link == blank %} absolute w-full w-1025-auto inset-y-0 static-1025{% else %} w-30 h-30 content-center{% endif %}">
              {% if enable_rtl %}
                <svg width="6" height="11" fill="none">
                  <use href="#icon-back" />
                </svg>
              {% else %}
                <svg width="6" height="11" fill="none">
                  <use href="#icon-next" />
                </svg>
              {% endif %}
            </open-children-toggle>
          {%- endif -%}
        </menu-item>
        {% if child_link.links.size > 0 %}
          <ul class="sub-children-menu{% if menu_type == 'dropdown' %} invisible-1025{% endif %} gradient transition absolute{% if menu_type != 'dropdown' %} static-1025{% endif %} list-unstyled">
            <li class="hidden-1025 grey-bg px-30 border-bottom flex gap-15 align-center justify-between{% if theme_st.menu_font == 'heading_font' %} heading-style{% endif %}">
              <back-menu
                class="py-10 min-h-55 inline-flex gap-20 align-center back-lv1 fs-big-1 heading-style"
                role="link"
              >
                {% if enable_rtl %}
                  <svg width="6" height="11" fill="none">
                    <use href="#icon-next" />
                  </svg>
                {% else %}
                  <svg width="6" height="11" fill="none">
                    <use href="#icon-back" />
                  </svg>
                {% endif %}
                {% liquid
                  assign child_link_title = child_link.title
                  assign clean_title = child_link_title
                  assign clean_title = clean_title | replace: '[hot]', ''
                  assign clean_title = clean_title | replace: '[new]', ''
                  assign clean_title = clean_title | replace: '[sale]', ''
                  assign clean_title = clean_title | replace: '[popular]', ''
                  assign clean_title = clean_title | replace: '[coming soon]', ''
                  assign clean_title = clean_title | strip
                %}
                {{ clean_title }}
              </back-menu>
              <close-menu class="close-menu lh-1 ms-10">
                <svg width="13" height="13" viewBox="0 0 13 13" fill="none">
                  <use href="#icon-close" />
                </svg>
              </close-menu>
            </li>
            <ul class="list-unstyled px-30 px-1025-0 gradient">
              {% for grandchild_link in child_link.links %}
                <li class="menu-link level-2 border-bottom border-bottom-1025-0">
                  {% liquid
                    assign label_setting = ''
                    assign show_label = false

                    if grandchild_link.title contains '[hot]'
                      assign label_setting = label_setting | append: 'hot'
                      assign show_label = true
                    endif

                    if grandchild_link.title contains '[new]'
                      assign label_setting = label_setting | append: 'new'
                      assign show_label = true
                    endif

                    if grandchild_link.title contains '[sale]'
                      assign label_setting = label_setting | append: 'sale'
                      assign show_label = true
                    endif

                    if grandchild_link.title contains '[popular]'
                      assign label_setting = label_setting | append: 'popular'
                      assign show_label = true
                    endif

                    if grandchild_link.title contains '[coming soon]' and only_for_domain == true
                      assign label_setting = label_setting | append: 'coming_soon'
                      assign show_label = true
                    endif

                    assign grandchild_link_title = grandchild_link.title
                    assign clean_title = grandchild_link_title
                    assign clean_title = clean_title | replace: '[hot]', ''
                    assign clean_title = clean_title | replace: '[new]', ''
                    assign clean_title = clean_title | replace: '[sale]', ''
                    assign clean_title = clean_title | replace: '[popular]', ''
                    assign clean_title = clean_title | replace: '[coming soon]', ''
                    assign clean_title = clean_title | strip
                  %}
                  <a
                    class="menu_item-link no-underline py-10 py-1025-5 min-h-55 min-h-1025-unset inline-flex align-center"
                    href="{{ grandchild_link.url }}"
                    aria-label="{{ clean_title }}"
                  >
                    <span class="reversed-links transition {% if clean_title == 'Mais Vendidos' or clean_title == 'LanÃ§amentos' or clean_title == 'Ver Todas'%} subheading_weight{% endif %} {% if clean_title contains 'Envio FULL' %}inline-flex subheading_weight primary-color gap-5 align-center{% endif %}">
                      {% if clean_title contains 'Envio FULL' %}
                          <svg width="13" height="19" viewBox="0 0 17 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16.4847 10.3247C16.4563 10.2045 16.3987 10.0931 16.3169 10.0006C16.2351 9.908 16.1318 9.83707 16.016 9.79406L10.615 7.76812L11.9894 0.893431C12.0205 0.7337 11.9989 0.568181 11.9277 0.421851C11.8565 0.27552 11.7396 0.156318 11.5947 0.082232C11.4498 0.00814581 11.2848 -0.0168043 11.1244 0.0111466C10.9641 0.0390974 10.8173 0.118433 10.706 0.237181L0.205988 11.4872C0.120708 11.577 0.0590157 11.6866 0.0264224 11.8061C-0.0061709 11.9257 -0.00865008 12.0514 0.0192066 12.1721C0.0470632 12.2928 0.104388 12.4048 0.186059 12.4979C0.267731 12.5911 0.371205 12.6625 0.487238 12.7059L5.89005 14.7319L4.51943 21.5991C4.4883 21.7588 4.50998 21.9243 4.58118 22.0706C4.65238 22.217 4.76925 22.3362 4.91414 22.4103C5.05903 22.4843 5.22409 22.5093 5.3844 22.4813C5.54472 22.4534 5.69159 22.3741 5.80286 22.2553L16.3029 11.0053C16.3866 10.9154 16.447 10.8064 16.4787 10.6877C16.5104 10.569 16.5125 10.4443 16.4847 10.3247ZM6.50786 19.3087L7.48943 14.3981C7.52456 14.224 7.49672 14.043 7.41087 13.8874C7.32503 13.7319 7.18675 13.6119 7.02068 13.5487L2.06693 11.6878L10 3.18843L9.01943 8.09906C8.9843 8.27321 9.01213 8.45419 9.09798 8.60974C9.18382 8.76529 9.3221 8.88531 9.48818 8.94843L14.4382 10.8047L6.50786 19.3087Z" fill="#135ED1"/>
                          </svg>
                      {% endif %}
                      {{- clean_title -}}
                    </span>
                    {% if show_label %}
                      <span class="menu_label rounded-2 text-center heading_weight relative absolute-1025 whitespace-nowrap uppercase  {{ label_setting }}">
                        {% if label_setting == 'coming_soon' and only_for_domain == true %}
                          coming soon
                        {% else %}
                          {{- section_st[label_setting] -}}
                        {% endif %}
                      </span>
                    {% endif %}
                  </a>
                </li>
              {% endfor %}
            </ul>
          </ul>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
{% endif %}
